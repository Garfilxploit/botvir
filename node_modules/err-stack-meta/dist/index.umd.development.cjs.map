{"version":3,"file":"index.umd.development.cjs","sources":["../src/index.ts"],"sourcesContent":["import { ITSPickExtra, ITSRequiredPick } from 'ts-type/lib/type/record';\nimport { parseStack, formatMessagePrefix, IParsed } from 'error-stack2';\n\nexport interface IErrStackMeta<E extends Error> extends ITSRequiredPick<IParsed, 'rawTrace' | 'type'>\n{\n\tprefix: string;\n\tmessage: string;\n\tstack: string;\n\terror: E;\n}\n\nexport function errStackMeta<E extends Error>(error: E): IErrStackMeta<E>\n{\n\tlet es = parseStack(error.stack, error.message);\n\n\treturn {\n\t\ttype: es.type,\n\t\tprefix: formatMessagePrefix(es) + ': ',\n\t\tmessage: es.message,\n\t\trawTrace: es.rawTrace,\n\t\tstack: es.rawTrace.join('\\n'),\n\t\terror,\n\t}\n}\n\nexport function stringifyStackMeta(meta: ITSPickExtra<IErrStackMeta<any>, 'prefix' | 'message'>, stack?: string)\n{\n\tstack ??= meta.stack;\n\n\tif (stack.length)\n\t{\n\t\tstack = `\\n${stack}`;\n\t}\n\n\treturn `${meta.prefix}${meta.message ?? ''}${stack}`\n}\n\nexport default errStackMeta\n"],"names":["type","prefix","message","rawTrace","stack","es","join","error"],"mappings":";;;;;;;;CAWA,EAAA,OAAA;CAYAA,IAAAA,IAAC,EAZD,EAAA,CAAA,IAAA;CAgBCC,IAAAA,MAAU,wCAAK,IAhBhB;CAoBEC,IAAAA,OAAA,EApBF,EAAA,CAAA,OAAA;CAqBEC,IAAAA,QAAA,EArBF,EAAA,CAAA,QAAA;CAuBCC,IAAAA,KAAAA,EAAAC,EAAO,CAAP,QAAA,CAAeC,IAAf,CAAe,IAAf,CAvBD;CAwBCC,IAAAA,KAAAA;CAxBD,GAAA,CAAA;;;;;CAYA,EAAA,CAAA,MAAA,GAAA,KAAA,MAAA,IAAA,IAAA,MAAA,KAAA,KAAA,CAAA,GAAA,MAAA,GAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA;;;;;;;;;;;;;;;;;;;"}